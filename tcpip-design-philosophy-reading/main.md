# 读 *David D. Clark. "The Design Philosophy of the DARPA Internet Protocols"*

文章主要介绍Internet设计的初衷, 基本目标, 以及如何实现这些目标.

文章对Internet的目标分为一下两类:

- 基本目标:
  - 将不同的网络互联起来.
  - 分组交换.

- 次要目标:
  1. 即使网络部分中间结点损坏也不影响端节点通信.
  1. 支持多种类型服务.
  1. 适应多种网络
  1. 分布式管理
  1. 经济
  1. 端节点易于接入
  1. 可以统计/计费

其中基本目标是Internet的基础,
如果用户对基本目标没有任何需求,
那么可以认为在这种使用场景下Internet架构不适用.

而次要目标可能根据不同使用场景而变化, 重要性的顺序可能也会不同, 这具体则体现于具体协议的选择以及协议中参数的选择上.


本文中, 我们不讨论这些目标的正确性, 是否有用等等.
我们主要讨论TCP/IP的具体实现中对这些目标的实现的情况和评价.

#### 各个目标的在TCP/IP中的实现
- IP协议在其他网络的上层.
- IP协议不假定底层协议的实现细节,
  IP协议仅仅假定底层协议可以发送长度至少长于一个比较短的长度的datagram.
- 不假定底层网络的类型, 所以IP datagram可以在
  基于datagram或者基于stream的的底层网络上传输.
- IP协议不假定底层协议保证可靠的连接. 可靠连接靠上层协议实现,
  这样IP datagram可以在可靠或者不可靠的底层网络上传输.

#### 各个目标之间的兼容性
- 分组交换. 分组交换带来的直接好处就是, 中间节点损坏不影响端节点通信, 而且适应多种网络.
- 兼容多种网络. 带来的好处包含支持多种类型服务, 但是分层模型和性能, 经济之间本来就存在难以同时实现的问题.
- 分布式管理, 端节点易于接入, 统计计费这些问题可以通过高层协议来解决, 所以不与其他目标矛盾.

#### TCP/IP的一些问题
- TCP协议试图通过参数支持多种服务类型, 但是这样会导致协议的庞大. 我们可以考虑Unix的设计哲学Do one thing at a time and do it best. 本来说的是同一个程序应该仅仅做一件事, 把他做好. 功能的扩展应该用不同程序组合来实现. 这样的设计可以是设计简单, 扩展容易, 但是这是没有免费的午餐. 工程中设计的复杂性/扩展性/性能是一个tradeoff. 所以我们看TCP的设计是用设计复杂性换取了性能. 但是反观现代TCP的使用上, TCP的TOS使用较少, 也可以看出这个设计确实是一个缺陷.
- TCP/IP试图兼容多种网络, 但是这带来的很大的问题是性能. 不同网络的性能本来就不同. 不通网络对带宽/可靠性/延迟的注重也不同, 试图连接不同类型的网络肯定会造成木桶效应. 导致整个网络的平均性能下降. 但是, 不兼容多种网络的协议又无法生存下去, 所以这也是没有办法的.
